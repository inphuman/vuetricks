---
layout: post
title: Pinia - –∫–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
tags: [Pinia, VueJS]
comments: false
---

## –ß—Ç–æ —Ç–∞–∫–æ–µ Pinia

Pinia - —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –¥–ª—è Vue 3.
–ï—Å–ª–∏ –≤—ã –¥—É–º–∞–µ—Ç–µ: "–û, –µ—â–µ –æ–¥–∏–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç?", —Ç–æ –ø—Ä–∞–≤–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ Pinia –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —Å–ª–µ–¥—É—é—â—É—é –≤–µ—Ä—Å–∏—é Vuex 4.

Pinia –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ –æ–±—â–µ–≥–æ —Å Vuex, –Ω–æ –æ–Ω–∞ –ø—Ä–æ—â–µ, –±–µ–∑–æ–ø–∞—Å–Ω–∞ –¥–ª—è —Ç–∏–ø–æ–≤ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞!

## –û–±—ä–µ–∫—Ç–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

**–û–±—ä–µ–∫—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:**

```js
import { defineStore } from 'pinia'

export const useStore = defineStore('main', {
  state: () => ({
    counter: 0,
  }),
  getters: {
    doubleCount: (state) => state.counter * 2,
  },
  actions: {
    increment() {
      this.counter++
    },
  }
})
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:**

```js
import { ref, computed } from 'vue'
import { defineStore } from 'pinia'

export const useStore = defineStore('main', () => {
  const counter = ref(0)
  const doubleCounter = computed(() => counter.value * 2)

  function increment() {
    counter.value++
  }

  return {
   counter,
   doubleCounter,
   increment
  }
})
```

–û–±—ä–µ–∫—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂ –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Vuex. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–æ—Ö–æ–∂ –Ω–∞ –º–µ—Ç–æ–¥ **setup()** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –≥–¥–µ –º—ã
–≤—Ä—É—á–Ω—É—é –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.

## –ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –ø–æ–º–æ—â—å—é –æ–±—ä–µ–∫—Ç–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ **$reset**:

```js
<script setup>
import { useStore } from './useStore'

const store = useStore()

store.$reset // üëà

</script>
```

## –ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∑–∞—Å—Ç–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ **$reset** —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ, –º—ã —Å–æ–∑–¥–∞–¥–∏–º **–ø–ª–∞–≥–∏–Ω Pinia**: ‚ú®

**reset-store.js**

```js
import cloneDeep from 'lodash.clonedeep'

export default function resetStore({ store }) {
  const initialState = cloneDeep(store.$state)
  store.$reset = () => store.$patch(cloneDeep(initialState))
}
```

–ó–¥–µ—Å—å –º—ã –≥–ª—É–±–æ–∫–æ –∫–æ–ø–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å –ø–æ–º–æ—â—å—é [lodash.clonedeep](https://www.npmjs.com/package/lodash.clonedeep) –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é **$reset**, –∫–æ—Ç–æ—Ä–∞—è
—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –µ–≥–æ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –í–∞–∂–Ω–æ —Å–Ω–æ–≤–∞ –≥–ª—É–±–æ–∫–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞
—Å–∞–º—É –∫–æ–ø–∏—é.

–° –ø–æ–º–æ—â—å—é `store.$patch` –º—ã –ø—Ä–∏–º–µ–Ω—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

–ó–∞—Ç–µ–º –≤ —Ñ–∞–π–ª–µ **main.js** –∏–ª–∏ —Ç–∞–º, –≥–¥–µ –≤—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç–µ **Pinia**:

```js
// ...
import { resetStore } from './reset-store'

//...
const pinia = createPinia()
pinia.use(resetStore)

app.use(pinia)

//...
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ—Ç—Ä—è—Å–∞—é—â–µ! –¢–µ–ø–µ—Ä—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º, –º–µ—Ç–æ–¥ **$reset** —Ä–∞–±–æ—Ç–∞–µ—Ç!